{% extends "main.html" %} {% block content %}
<p class="d-flex">
 <h1 class="fw-bold">Welcome, {{ request.user.username }} </h1> 
  <form method="POST" action="{% url 'staff_logout' %}" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn btn-link  align-baseline badge text-decoration-none bg-primary">
        Logout
    </button>
</form>
</p>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="fw-bold">All Registered Mothers</h3>

    <a href="{% url 'register' %}" class="btn btn-primary">
      + Register Mother
    </a>
  </div>

  <div class="card shadow-lg p-4">
    <input
      id="searchInput"
      type="text"
      class="form-control mb-3"
      placeholder="Search mothers by name or phone..."
    />

    <div class="table-responsive">
      <table class="table table-hover table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>Name</th>
            <th>Phone</th>
            <th>Consent</th>
            <th>Registered</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody id="mothersTable">
          {% for mother in mothers %}
          <tr>
            <td>{{ mother.name }}</td>
            <td>{{ mother.phone }}</td>

            <td>
              {% if mother.consent %}
              <span class="badge bg-success">Yes</span>
              {% else %}
              <span class="badge bg-danger">No</span>
              {% endif %}
            </td>

            <td>{{ mother.created_at|date:"M d, Y" }}</td>

            <td>
              <a
                href="{% url 'motherPage' mother.id %}"
                class="btn btn-sm btn-outline-primary"
              >
                View
              </a>
            </td>
          </tr>
           {% endfor %} 
          <tr>
            <td colspan="8" class="text-center py-3 text-muted">
             Registered Moms will appear here
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  // Simple search filter (client-side)
  const searchInput = document.getElementById("searchInput");
  const tableRows = document.querySelectorAll("#mothersTable tr");

  searchInput.addEventListener("keyup", function () {
    const value = searchInput.value.toLowerCase();
    tableRows.forEach((row) => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(value) ? "" : "none";
    });
  });
</script>
 {% endblock %}
